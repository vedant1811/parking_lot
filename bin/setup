#!/bin/bash

# Add script to:
# * Install dependencies
# * Build/Compile
# * Run Test Suit to validate
#
# After this is run, bin/parking_lot
# should Just Work.

# Exit immediately if a command exits with a non-zero status.
set -e

PATH=$PWD:$PATH
export PATH

START_DIR=$PWD

cd ../functional_spec
bundle install

cd app
echo 'running unit tests'
rspec

cd $START_DIR

# open a subshell because the new PATH will not be persisted once this script ends
echo 'Setup complete! Entering subshell'
echo 'Now you can run `run_functional_tests` or `parking_lot`'
echo 'enter `exit` to exit from subshell'
bash --norc
